{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020-01-05-serving-static-files/","result":{"data":{"site":{"siteMetadata":{"title":"Yoonjae Park's Blog"}},"markdownRemark":{"id":"2f5415e4-37b9-5cce-b7f4-6dc5e5bf6fd1","excerpt":"기존에는 Django 자체의 web server 기능으로 디버깅을 하다가 \naws 환경에서는 Debug를 false로 세팅해야겠다 싶어서 변경했다.\n다른건 잘 나오는데 css과 같은 static file…","html":"<p>기존에는 Django 자체의 web server 기능으로 디버깅을 하다가\naws 환경에서는 Debug를 false로 세팅해야겠다 싶어서 변경했다.\n다른건 잘 나오는데 css과 같은 static file들이 제대로 제공되지 않아서 페이지가 제대로 표시되지 않는 문제가 발생.\n찾아보니 Django의 디버깅용 서버는 static 파일을 다양한 위치에서 검색해서 제공하지만,\n<code class=\"language-text\">DEBUG=False</code>인 경우는 웹서버가 그 일을 해주기 때문에 해주지 않는다고 한다.\n웹서버는 파일이 다양한 경로에 분산되어 있기보단 한 폴더 내에 모두 있어야 효율적이므로 한 폴더로 모으는 작업이 필요하게 된다.</p>\n<p>먼저 모아주는 위치를 settings.py에서 STATIC_ROOT로 지정해주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">echo yes | python3 manage.py collectstatic</code></pre></div>\n<p>를 스크립트에 추가하였다.\n프로젝트에 흩어져 있는 staticfile을 모아주는 역할이라고 한다.\n매번 돌릴 스크립트인데, 이미 모아저 있는 경우 yes, no를 물어 보길래 입력으로 yes를 넣어주었다.</p>\n<p>Ngnix에서는 url의 static 경로를 모아져 있는 폴더 위치로 지정해줘야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">location /static/ {\n        alias /work/dashboard/.static_root/;\n}</code></pre></div>\n<p>와 같이 지정해주면 된다.</p>\n<p>처음에 제대로 되지 않아서\n<code class=\"language-text\">autoindex on;</code> 옵션을 통해 제대로 된 디렉토리인지 디버깅이 가능하게 하였다.</p>\n<blockquote>\n<p>알고보니 그냥 엔진 재시작을 하면 적용이 제대로 되는 상황이였다.</p>\n</blockquote>\n<h3>정리</h3>\n<ol>\n<li>settings.py에 STATIC_ROOT추가</li>\n<li>manage.py collectstatic 수행</li>\n<li>nginx location 추가</li>\n<li>각 엔진 재시작</li>\n</ol>","fields":{"slug":"/2020-01-05-serving-static-files/"},"frontmatter":{"title":"Serving static files","date":"January 05, 2020","description":null}},"previous":{"fields":{"slug":"/2020-01-05-free-services-in-Azure/"},"frontmatter":{"title":"Free Sevices in Azure"}},"next":{"fields":{"slug":"/2020-01-12-crawling-with-selenium/"},"frontmatter":{"title":"Crawling with Selenium"}}},"pageContext":{"id":"2f5415e4-37b9-5cce-b7f4-6dc5e5bf6fd1","previousPostId":"3af8dae5-35a6-543d-97e4-731625664045","nextPostId":"1c5d0de5-2153-5cf0-85f1-5ca4585743f0"}},"staticQueryHashes":["3000541721","3667728435"]}