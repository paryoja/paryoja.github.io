{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020-02-23-django-admin-too-many-foreign-key/","result":{"data":{"site":{"siteMetadata":{"title":"Yoonjae Park's Blog"}},"markdownRemark":{"id":"74810a52-7fc2-5dd8-981c-b393a5d60cb7","excerpt":"Django에서 이미지에 대한 Rating을 Foreign Key로 관리하다 보니, 이미지 수가 많아 짐에 따라 Admin 페이지에서\n변경할 때, 모든 이미지를 select box로 제공하려다 보니 수정이 불가능해질 정도로 느려지는 경우가 있다.\n이럴때에는 rawidfields…","html":"<p>Django에서 이미지에 대한 Rating을 Foreign Key로 관리하다 보니, 이미지 수가 많아 짐에 따라 Admin 페이지에서\n변경할 때, 모든 이미지를 select box로 제공하려다 보니 수정이 불가능해질 정도로 느려지는 경우가 있다.\n이럴때에는 raw<em>id</em>fields를 활용하여 select box로 제공하지 않도록 설정 해줄 수 있다.\n<a href=\"https://docs.djangoproject.com/en/3.0/ref/contrib/admin/#django.contrib.admin.ModelAdmin.raw_id_fields\">장고 Admin 설명</a></p>\n<p>models.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PokemonImage</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    url <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>URLField<span class=\"token punctuation\">(</span>unique<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span>\n    title <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PokemonRating</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    image <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>PokemonImage<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span></code></pre></div>\n<p>admin.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RatingAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    raw_id_fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"image\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n\nadmin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Rating<span class=\"token punctuation\">,</span> RatingAdmin<span class=\"token punctuation\">)</span></code></pre></div>\n<p>데코레이터를 쓰면 다음과 같이 더 간단하게 표현 가능하다</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@admin<span class=\"token punctuation\">.</span>reister</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Rating<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RatingAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    raw_id_fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"image\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"/2020-02-23-django-admin-too-many-foreign-key/"},"frontmatter":{"title":"Django Admin Too Many Foreign Key","date":"February 23, 2020","description":null}},"previous":{"fields":{"slug":"/2020-02-09-get-settings-from-django-settings/"},"frontmatter":{"title":"Get settings from Django settings"}},"next":{"fields":{"slug":"/2020-02-29-opening-2375-port-for-dockerd-in-mac/"},"frontmatter":{"title":"Opening 2375 port for dockerd in Mac"}}},"pageContext":{"id":"74810a52-7fc2-5dd8-981c-b393a5d60cb7","previousPostId":"c4bc16f5-b7e0-52ca-bc83-4aa1a048dec9","nextPostId":"f51f8f66-01ec-54bb-b668-7149f592a282"}},"staticQueryHashes":["3000541721","3667728435"]}